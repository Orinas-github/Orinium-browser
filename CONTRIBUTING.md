# Coding Guideline
このドキュメントはOrinium Browserに貢献する際に従わなければならない規則です。
これに従っていない場合、再調整を依頼したり、却下したりする可能性があります。

## 基本
- インデントサイズは4です。
- 変数名はsnake_caseである必要があります（例: hoge_hoge）
- 関数名はPascalCaseである必要があります（例: ViewDomTree）
- 構造体名、列挙型名、トレイト名はPascalCaseである必要があります（例: TcpConnection, NetworkCore）
- 定数名はSCREAMING_SNAKE_CASEである必要があります（例: MAX_CONNECTIONS）
- モジュール名はsnake_caseである必要があります（例: network_core, connection_pool）

## コード構造
- 各ファイルの先頭に簡潔な説明コメントを入れてください
- `use`文は論理的にグループ化し、標準ライブラリ、外部クレート、内部モジュールの順に並べます
- 関連するトレイト実装はそれぞれを分けて実装してください（例: AsyncRead, AsyncWriteは別々に実装）
- 実装は機能単位で論理的に整理し、関連する機能をグループ化してください

## ドキュメント
- パブリックAPIには必ずドキュメントコメント（`///`）を追加してください
- 関数の引数、戻り値、およびエラーケースについて説明してください
- 複雑なアルゴリズムや非自明なコードには内部コメント（`//`）を追加してください
    - ただし、内部コメントが必要になるような非自明なコードを書くべきではありません。コメントを書いているからと言って、読みずらければ何の意味もありません。
- 日本語と英語のどちらでコメントを書いても構いませんが、一貫性を保ってください

## エラー処理 / ログ
- パブリックAPIでは`anyhow::Result`を使用して包括的なエラー処理を行ってください
- 内部関数では適切な場合は`std::io::Result`などの具体的なResultを使用してください
- エラーメッセージは明確で具体的にしてください
- パニックするコードは避け、常にエラーを伝播させるべきです
- ログは`log::info!`のようにフルパスで書くこと

## 非同期処理
- 非同期関数には`async`キーワードを使用し、`tokio`のランタイムと互換性を保ってください
- `async fn`シグネチャを使用し、`Future`の明示的な型付けは避けてください
- 長時間実行される操作にはタイムアウトを設定してください
- `tokio`の適切な型（`RwLock`、`Mutex`など）を使用してください

## テスト
- 新しい機能には対応するテストを追加してください
- テスト関数には`#[test]`または`#[tokio::test]`属性を付けてください
- テスト名は`機能名_条件_test`のフォーマットに従ってください
- 環境に依存するテストには`#[ignore]`属性を付けてください

## パフォーマンスと最適化
- 不必要なクローンや所有権の移動を避けてください
- 大きなデータ構造を関数間で渡す場合は参照を使用してください
- 早期最適化は避け、必要な場合はベンチマークで改善を検証してください
- リソースリークを防ぐため、必要に応じて`Drop`トレイトを実装してください

## 依存関係
- 新しい依存関係を追加する場合は、プロジェクトリーダーと相談してください
- 依存関係は最小限に抑え、必要に応じて機能フラグを使用してください
- セキュリティ上の理由から、依存関係は定期的に更新してください

## コミット
- コミットメッセージは明確で説明的にしてください
- コミットメッセージは日本語でも、英語でも構いませんが、それがどのような変更（修正なのか、新たな機能の追加なのかなど）かがわかりやすいようにしてください。

## プルリクエスト
- プルリクエストを送信する前に、すべてのテストが通ることを確認してください
- 変更内容を簡潔に説明し、解決する問題への参照を含めてください